# ===========================================
# Chore-Ganizer Configuration
# ===========================================
# Copy this file to .env and customize for your environment.
# This is the single source of truth for all configuration.
# Docker Compose reads this file and passes variables to containers at runtime.
# Changes to .env take effect on container restart (no rebuild needed).
# NEVER commit .env to git if it contains secrets.

# ===========================================
# APPLICATION VERSION
# ===========================================
# Single source of truth for version number
# Update this with each release (MAJOR.MINOR.PATCH)
APP_VERSION=1.8.0

# ===========================================
# BACKEND CONFIGURATION
# ===========================================

# Environment mode (development/production)
NODE_ENV=production

# Server port (host port mapping in docker-compose)
PORT=3010

# Database URL (SQLite file path in container)
# Default: file:/app/data/chore-ganizer.db
DATABASE_URL=file:/app/data/chore-ganizer.db

# Session Secret (CRITICAL: Generate a strong random secret)
# Generate with: openssl rand -base64 32
# IMPORTANT: Change this in production!
SESSION_SECRET=CHANGE_ME_TO_A_LONG_RANDOM_STRING_AT_LEAST_32_CHARACTERS

# Backend URL (for external references, optional)
# Example: http://your-server:3010
BACKEND_URL=http://your-server:3010

# Session Configuration
# Session max age in milliseconds
# 604800000 = 7 days (default)
# 86400000 = 1 day
# 3600000 = 1 hour
SESSION_MAX_AGE=604800000

# Enable secure cookies for HTTPS (true/false)
# Set to true when using HTTPS (required for production with SSL)
SECURE_COOKIES=false

# CORS - Set to the URL where the frontend is accessible
# This should match the URL users access the app from
# Example: https://chores.yourdomain.com
CORS_ORIGIN=http://localhost:3002

# Log Level (error, warn, info, debug)
# Use 'debug' for troubleshooting, 'info' or 'warn' for production
LOG_LEVEL=info

# ===========================================
# FRONTEND CONFIGURATION
# ===========================================
# These are runtime configuration values passed to the frontend container.
# The frontend nginx generates config.js at startup with these values.

# API URL - Leave empty for same-origin via nginx proxy
# The frontend nginx proxies /api requests to the backend
# Only set this if you need to connect to a different backend
VITE_API_URL=

# Debug Mode - Set to 'true' to enable console logging in production
# WARNING: Should be 'false' in production for security
VITE_DEBUG=false

# Frontend port (host port mapping, optional override)
# Default: 3002
# FRONTEND_PORT=3002

# ===========================================
# NTFY NOTIFICATION SETTINGS (DEFAULTS)
# ===========================================
# These values are used when a user hasn't configured their own notification settings
# Users can override these in their personal settings

# Default ntfy server URL
# Leave empty to use https://ntfy.sh (public ntfy server)
# For self-hosted ntfy: https://ntfy.yourdomain.com
NTFY_DEFAULT_SERVER_URL=https://ntfy.sh

# Default ntfy topic for family notifications
# Leave empty to require users to configure their own topic
# Example: my-family-chores (becomes https://ntfy.sh/my-family-chores)
NTFY_DEFAULT_TOPIC=

# Default notification toggles (true/false)
# Whether to send notifications for various events
NTFY_DEFAULT_NOTIFY_CHORE_ASSIGNED=true
NTFY_DEFAULT_NOTIFY_CHORE_DUE_SOON=true
NTFY_DEFAULT_NOTIFY_CHORE_COMPLETED=true
NTFY_DEFAULT_NOTIFY_CHORE_OVERDUE=true
NTFY_DEFAULT_NOTIFY_POINTS_EARNED=true

# Default hours before due date to send reminder
# Example: 2 = send reminder 2 hours before due
NTFY_DEFAULT_REMINDER_HOURS=2

# Default quiet hours (0-23, leave empty to disable)
# Notifications won't be sent during these hours
# Example: START=22, END=7 = quiet from 10pm to 7am
NTFY_DEFAULT_QUIET_HOURS_START=
NTFY_DEFAULT_QUIET_HOURS_END=

# ===========================================
# OVERDUE PENALTY SETTINGS
# ===========================================
# These settings control how penalties are applied for overdue chores

# Enable overdue penalties by default (true/false)
# When enabled, users lose points for overdue chores
OVERDUE_PENALTY_ENABLED=true

# Default penalty multiplier
# Penalty = -multiplier × chore points
# Example: multiplier=2, chore=10 points → penalty=-20 points
OVERDUE_PENALTY_MULTIPLIER=2

# Notify parents when a child's chore becomes overdue (true/false)
NOTIFY_PARENT_ON_OVERDUE=true

# ===========================================
# OPTIONAL: MONITORING & LOGGING
# ===========================================

# Sentry error tracking (optional)
# Sign up at https://sentry.io for error tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Error Webhook (ntfy) - Get alerts for server errors
# Enable error notifications via ntfy webhook
# Example: https://ntfy.sh/my-chores-errors
ERROR_WEBHOOK_ENABLED=false
ERROR_WEBHOOK_URL=
ERROR_WEBHOOK_USERNAME=
ERROR_WEBHOOK_PASSWORD=
# Minimum priority to send (1-5, default 4 for errors only)
ERROR_WEBHOOK_MIN_PRIORITY=4

# ===========================================
# OPTIONAL: FUTURE FEATURES
# ===========================================

# Email (for future password reset feature)
# SMTP_HOST=
# SMTP_PORT=
# SMTP_USER=
# SMTP_PASS=
# SMTP_FROM=

# Push Notifications (for future feature)
# FCM_SERVER_KEY=
# FCM_PROJECT_ID=
